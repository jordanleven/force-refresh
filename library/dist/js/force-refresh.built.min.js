!function(a,b,c){var d={class_name:"ForceReload",default_options:{api_url:force_refresh_js_object.ajax_url,elements:{force_refresh_admin_form:"#force-refresh-admin",force_refresh_admin_notice_container:"#alert-container"},timing:{update_site_version_interval_in_seconds:force_refresh_js_object.refresh_interval}},init:function(){this.options=this.default_options,this.bindGetVersion()},bindGetVersion:function(){var a=this;a.getVersion(),a.debug("Refreshing every "+a.options.timing.update_site_version_interval_in_seconds+" seconds..."),setInterval(function(){a.getVersion()},1e3*a.options.timing.update_site_version_interval_in_seconds)},getVersion:function(){this.ajaxCall(this.options.api_url,"GET",{success:this.getVersionCallbackSuccess,fail:this.getVersionCallbackSuccess},{action:"force_refresh_get_version",post_id:force_refresh_js_object.post_id})},getVersionCallbackSuccess:function(b){var c=b.ajax_data.return_data,d=c.current_site_version,e=c.current_page_version,f=a("html").data("site-version"),g=a("html").data("page-version");f||(this.debug("No stored site version. Storing new version (ver. "+d+")"),a("html").data("site-version",d)),g?d!==f?(this.debug("New site version available. Refreshing..."),location.reload()):e!==g?(this.debug("New page version available. Refreshing..."),location.reload()):this.debug("Site up-to-date (ver. "+d+")"):(this.debug("No stored page version. Storing new version (ver. "+e+")"),a("html").data("page-version",e))},ajaxCall:function(b,c,d,e,f){e=e||{},f=f||{},f.data_object=e,this.debug("Submitting AJAX call..."),a.ajax({type:c,url:b,context:this,data:e,dataType:"JSON"}).done(function(a){this.debug("AJAX call finished.")}).success(function(a){a.success?d.success&&d.success.call(this,{ajax_data:a,additional_arguments:f}):this.error(a)}).always(function(){d.always&&d.always.call(this)}).fail(function(a){this.error("AJAX error. Error below:"),this.error(a),d.fail&&d.fail.call(this,{ajax_data:a.responseJSON,additional_arguments:f})})},debug:function(a){a="string"==typeof a?a:JSON.stringify(a)},error:function(a){a="string"==typeof a?a:JSON.stringify(a),console.error(this.class_name+" - "+a)},warn:function(a){a="string"==typeof a?a:JSON.stringify(a),console.warn(this.class_name+" - "+a)}};a(function(){Object.create(d).init()})}(jQuery,window,document);
!function(a,b,c){var d={class_name:"ForceReload",default_options:{api_url:force_refresh_js_object.ajax_url,elements:{force_refresh_admin_form:"#force-refresh-admin",force_refresh_admin_notice_container:"#alert-container"},timing:{update_site_version_interval_in_seconds:120}},init:function(){this.options=this.default_options,this.bindGetSiteVersion()},bindGetSiteVersion:function(){var a=this;a.getSiteVersion(),setInterval(function(){a.getSiteVersion()},1e3*a.options.timing.update_site_version_interval_in_seconds)},getSiteVersion:function(){this.ajaxCall(this.options.api_url,"GET",{success:this.getSiteVersionCallbackSuccess,fail:this.getSiteVersionCallbackSuccess},{action:"force_refresh_get_site_version"})},getSiteVersionCallbackSuccess:function(b){var c=b.ajax_data.return_data,d=c.current_site_version,e=a("html").data("site-version");e?d!==e?(this.debug("New version available. Refreshing..."),location.reload()):this.debug("Site up-to-date (ver. "+d+")"):(this.debug("No stored version. Storing new version (ver. "+d+")"),a("html").data("site-version",d))},ajaxCall:function(b,c,d,e,f){e=e||{},f=f||{},f.data_object=e,this.debug("Submitting AJAX call..."),a.ajax({type:c,url:b,context:this,data:e,dataType:"JSON"}).done(function(a){this.debug("AJAX call finished.")}).success(function(a){a.success?d.success&&d.success.call(this,{ajax_data:a,additional_arguments:f}):this.error(a)}).always(function(){d.always&&d.always.call(this)}).fail(function(a){this.error("AJAX error. Error below:"),this.error(a),d.fail&&d.fail.call(this,{ajax_data:a.responseJSON,additional_arguments:f})})},debug:function(a){a="string"==typeof a?a:JSON.stringify(a)},error:function(a){a="string"==typeof a?a:JSON.stringify(a),console.error(this.class_name+" - "+a)},warn:function(a){a="string"==typeof a?a:JSON.stringify(a),console.warn(this.class_name+" - "+a)}};a(function(){Object.create(d).init()})}(jQuery,window,document);